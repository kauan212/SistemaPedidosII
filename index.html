document.getElementById("enviarPedido").addEventListener("click", async () => {
  try {
    const revendedor = document.getElementById("revendedor").value.trim();
    if (!revendedor) {
      alert("Digite seu nome!");
      return;
    }

    // Coleta dados dos produtos (inclui zerados)
    const produtos = {};
    document.querySelectorAll("input[type='number']").forEach(input => {
      produtos[input.id] = input.value || 0;
    });

    const response = await fetch("https://sistemapedidosii.onrender.com/enviar-pedido", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ revendedor, ...produtos }),
    });

    const result = await response.json();
    if (!response.ok) throw new Error(result.error || "Erro desconhecido");
    
    alert(result.message);
    // Limpa o formul√°rio (opcional)
    document.querySelector("form").reset();

  } catch (error) {
    console.error("Erro no frontend:", error);
    alert(`Erro: ${error.message}`);
  }
});
